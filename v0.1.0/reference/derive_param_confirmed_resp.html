<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Adds a parameter for confirmed response"><title>Adds a Parameter for Confirmed Response — derive_param_confirmed_resp • admiralonco</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Adds a Parameter for Confirmed Response — derive_param_confirmed_resp"><meta property="og:description" content="Adds a parameter for confirmed response"><meta property="og:image" content="https://pharmaverse.github.io/admiralonco/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">admiralonco</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/admiralonco.html">Get Started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-user-guides">User Guides</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-user-guides">
    <a class="dropdown-item" href="../articles/adrs.html">Creating ADRS</a>
    <a class="dropdown-item" href="../articles/adtte.html">Creating ADTTE</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<!-- start dropdown for versions --> <li class="nav-item dropdown">
        <a href="#" class="nav-link dropdown-toggle"
          data-bs-toggle="dropdown" role="button"
          aria-expanded="false" aria-haspopup="true"
          id="dropdown-versions">Versions</a> <div class="dropdown-menu" aria-labelledby="dropdown-versions"> <a class="dropdown-item" data-toggle="tooltip" title="" href="https://bundfussr.github.io/admiralonco/main">main</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://bundfussr.github.io/admiralonco/devel">devel</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://bundfussr.github.io/admiralonco/pre-release">pre-release</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://bundfussr.github.io/admiralonco/latest-tag">latest-tag</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://bundfussr.github.io/admiralonco/v0.2.0">v0.2.0</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://bundfussr.github.io/admiralonco/v0.1.0">v0.1.0</a> </div></li>
<!-- end dropdown for versions -->
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/pharmaverse/admiralonco" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Adds a Parameter for Confirmed Response</h1>
      <small class="dont-index">Source: <a href="https://github.com/pharmaverse/admiralonco/blob/test/R/derive_param_confirmed_resp.R" class="external-link"><code>R/derive_param_confirmed_resp.R</code></a></small>
      <div class="d-none name"><code>derive_param_confirmed_resp.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Adds a parameter for confirmed response</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">derive_param_confirmed_resp</span><span class="op">(</span>
  <span class="va">dataset</span>,
  <span class="va">dataset_adsl</span>,
  <span class="va">filter_source</span>,
  source_pd <span class="op">=</span> <span class="cn">NULL</span>,
  source_datasets <span class="op">=</span> <span class="cn">NULL</span>,
  <span class="va">ref_confirm</span>,
  max_nr_ne <span class="op">=</span> <span class="fl">1</span>,
  accept_sd <span class="op">=</span> <span class="cn">FALSE</span>,
  aval_fun <span class="op">=</span> <span class="va">yn_to_numeric</span>,
  <span class="va">set_values_to</span>,
  subject_keys <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">STUDYID</span>, <span class="va">USUBJID</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>dataset</dt>
<dd><p>Input dataset</p>
<p>The <code>PARAMCD</code>, <code>ADT</code>, and <code>AVALC</code> variables and the variables specified by
<code>subject_keys</code> and <code>reference_date</code> are expected.</p>
<p>After applying <code>filter_source</code> and/or <code>source_pd</code> the variable <code>ADT</code> and the
variables specified by <code>subject_keys</code> must be a unique key of the dataset.</p></dd>
<dt>dataset_adsl</dt>
<dd><p>ADSL input dataset</p>
<p>The variables specified for <code>subject_keys</code> are expected. For each subject
of the specified dataset a new observation is added to the input dataset.</p></dd>
<dt>filter_source</dt>
<dd><p>Source filter</p>
<p>All observations in <code>dataset_source</code> fulfilling the specified condition are
considered for deriving the confirmed response.</p></dd>
<dt>source_pd</dt>
<dd><p>Date of first progressive disease (PD)</p>
<p>If the parameter is specified, the observations of the input dataset for
deriving the new parameter are restricted to observations up to the
specified date. Observations at the specified date are included. For
subjects without first PD date all observations are take into account.</p>
<p><em>Permitted Values:</em> a <code>date_source</code> object (see <code><a href="https://rdrr.io/pkg/admiral/man/date_source.html" class="external-link">admiral::date_source()</a></code>
for details)</p></dd>
<dt>source_datasets</dt>
<dd><p>Source dataset for the first PD date</p>
<p>A named list of datasets is expected. It links the <code>dataset_name</code> from
<code>source_pd</code> with an existing dataset.</p>
<p>For example if <code>source_pd = pd_date</code> with</p>
<p></p><div class="sourceCode r"><pre><code><span class="va">pd_date</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/admiral/man/date_source.html" class="external-link">date_source</a></span><span class="op">(</span>
  dataset_name <span class="op">=</span> <span class="st">"adrs"</span>,
  date <span class="op">=</span> <span class="va">ADT</span>,
  filter <span class="op">=</span> <span class="va">PARAMCD</span> <span class="op">==</span> <span class="va">PD</span>
<span class="op">)</span></code></pre><p></p></div>
<p>and the actual response dataset in the script is <code>myadrs</code>, <code>source_datasets = list(adrs = myadrs)</code> should be specified.</p></dd>
<dt>ref_confirm</dt>
<dd><p>Minimum time period for confirmation</p>
<p>The assessment and the confirmatory assessment for <code>"CR"</code> and <code>"PR"</code> have
to be at least the specified number of days apart.</p></dd>
<dt>max_nr_ne</dt>
<dd><p>The specified number of <code>"NE"</code> assessments between the assessment and the
confirmatory assessment for <code>"CR"</code> and <code>"PR"</code> response is accepted.</p>
<p><em>Permitted Values:</em> a non-negative numeric scalar</p></dd>
<dt>accept_sd</dt>
<dd><p>Accept <code>"SD"</code> for <code>"PR"</code>?</p>
<p>If the argument is set to <code>TRUE</code>, one <code>"SD"</code> assessment between the
assessment and the confirmatory assessment for <code>"PR"</code> response is accepted.
Otherwise, no <code>"SD"</code> assessment must occur between the two assessments.</p>
<p><em>Permitted Values:</em> a logical scalar</p></dd>
<dt>aval_fun</dt>
<dd><p>Function to map character analysis value (<code>AVALC</code>) to numeric
analysis value (<code>AVAL</code>)</p>
<p>The (first) argument of the function must expect a character vector and the
function must return a numeric vector.</p>
<p><em>Default:</em> <code>yn_to_numeric</code> (see <code><a href="https://rdrr.io/pkg/admiral/man/yn_to_numeric.html" class="external-link">admiral::yn_to_numeric()</a></code> for details)</p></dd>
<dt>set_values_to</dt>
<dd><p>Variables to set</p>
<p>A named list returned by <code><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars()</a></code> defining the variables to be set for the
new parameter, e.g. <code>vars(PARAMCD = "CRSP", PARAM = "Confirmed Response")</code>
is expected. The values must be symbols, character strings, numeric values,
or <code>NA</code>.</p></dd>
<dt>subject_keys</dt>
<dd><p>Variables to uniquely identify a subject</p>
<p>A list of symbols created using <code><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars()</a></code> is expected.</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>The input dataset with a new parameter for confirmed response</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    
<ol><li><p>The input dataset (<code>dataset</code>) is restricted to the observations matching
<code>filter_source</code> and to observations before or at the date specified by
<code>source_pd</code>.</p></li>
<li><p>A subject is considered as responder if there is at least one
observation in the restricted dataset with</p>
<ul><li><p><code>AVALC == "CR"</code>,</p></li>
<li><p>there is a confirmatory assessment with <code>AVALC == "CR"</code> at least
<code>ref_confirm</code> days after the assessment,</p></li>
<li><p>all assessments between the assessment and the confirmatory
assessment are <code>"CR"</code> or <code>"NE"</code>, and</p></li>
<li><p>there are at most <code>max_nr_ne</code> <code>"NE"</code> assessments between the
assessment and the confirmatory assessment.</p></li>
</ul><p>or at least one observation with</p>
<ul><li><p><code>AVALC == "PR"</code>,</p></li>
<li><p>there is a confirmatory assessment with <code>AVALC %in% c("CR", "PR")</code> at
least <code>ref_confirm</code> days after the assessment,</p></li>
<li><p>all assessments between the assessment and the confirmatory
assessment are <code>"CR"</code>, <code>"PR"</code>, <code>"SD"</code>, or <code>"NE"</code>,</p></li>
<li><p>there is no <code>"PR"</code> assessment after a <code>"CR"</code> assessment in the
confirmation period,</p></li>
<li><p>there are at most <code>max_nr_ne</code> <code>"NE"</code> assessments between the
assessment and the confirmatory assessment,</p></li>
<li><p>if the <code>accept_sd</code> argument is set to <code>TRUE</code>, one <code>"SD"</code> assessment
in the confirmation period is accepted. Otherwise, no <code>"SD"</code> assessment
must occur within the confirmation period.</p></li>
</ul></li>
<li><p>For responders <code>AVALC</code> is set to <code>"Y"</code> and <code>ADT</code> to the first date where
the response criteria are fulfilled. For all other subjects in
<code>dataset_adsl</code> <code>AVALC</code> is set to <code>"N"</code> and <code>ADT</code> to <code>NA</code>.</p></li>
<li><p>The <code>AVAL</code> variable is added and set to <code>aval_fun(AVALC)</code>.</p></li>
<li><p>The variables specified by the <code>set_values_to</code> parameter are added to
the new observations.</p></li>
<li><p>The new observations are added to input dataset.</p></li>
</ol></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>ADRS Functions for adding Parameters: 
<code><a href="derive_param_bor.html">derive_param_bor</a>()</code>,
<code><a href="derive_param_clinbenefit.html">derive_param_clinbenefit</a>()</code>,
<code><a href="derive_param_confirmed_bor.html">derive_param_confirmed_bor</a>()</code>,
<code><a href="derive_param_lasta.html">derive_param_lasta</a>()</code>,
<code><a href="derive_param_response.html">derive_param_response</a>()</code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Stefan Bundfuss</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"></span>
<span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://pharmaverse.github.io/admiral/" class="external-link">admiral</a></span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Create ADSL dataset</span></span>
<span class="r-in"><span class="va">adsl</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span>
<span class="r-in">  <span class="op">~</span><span class="va">USUBJID</span>, <span class="op">~</span><span class="va">TRTSDTC</span>,</span>
<span class="r-in">  <span class="st">"1"</span>,      <span class="st">"2020-01-01"</span>,</span>
<span class="r-in">  <span class="st">"2"</span>,      <span class="st">"2019-12-12"</span>,</span>
<span class="r-in">  <span class="st">"3"</span>,      <span class="st">"2019-11-11"</span>,</span>
<span class="r-in">  <span class="st">"4"</span>,      <span class="st">"2019-12-30"</span>,</span>
<span class="r-in">  <span class="st">"5"</span>,      <span class="st">"2020-01-01"</span>,</span>
<span class="r-in">  <span class="st">"6"</span>,      <span class="st">"2020-02-02"</span>,</span>
<span class="r-in">  <span class="st">"7"</span>,      <span class="st">"2020-02-02"</span>,</span>
<span class="r-in">  <span class="st">"8"</span>,      <span class="st">"2020-04-01"</span>,</span>
<span class="r-in">  <span class="st">"9"</span>,      <span class="st">"2020-03-01"</span></span>
<span class="r-in"><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span class="r-in">    STUDYID <span class="op">=</span> <span class="st">"XX1234"</span></span>
<span class="r-in">  <span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Create ADRS dataset</span></span>
<span class="r-in"><span class="va">ovr_obs</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span>
<span class="r-in">  <span class="op">~</span><span class="va">USUBJID</span>, <span class="op">~</span><span class="va">ADTC</span>,        <span class="op">~</span><span class="va">AVALC</span>,</span>
<span class="r-in">  <span class="st">"1"</span>,      <span class="st">"2020-01-01"</span>, <span class="st">"PR"</span>,</span>
<span class="r-in">  <span class="st">"1"</span>,      <span class="st">"2020-02-01"</span>, <span class="st">"CR"</span>,</span>
<span class="r-in">  <span class="st">"1"</span>,      <span class="st">"2020-02-16"</span>, <span class="st">"NE"</span>,</span>
<span class="r-in">  <span class="st">"1"</span>,      <span class="st">"2020-03-01"</span>, <span class="st">"CR"</span>,</span>
<span class="r-in">  <span class="st">"1"</span>,      <span class="st">"2020-04-01"</span>, <span class="st">"SD"</span>,</span>
<span class="r-in">  <span class="st">"2"</span>,      <span class="st">"2020-01-01"</span>, <span class="st">"SD"</span>,</span>
<span class="r-in">  <span class="st">"2"</span>,      <span class="st">"2020-02-01"</span>, <span class="st">"PR"</span>,</span>
<span class="r-in">  <span class="st">"2"</span>,      <span class="st">"2020-03-01"</span>, <span class="st">"SD"</span>,</span>
<span class="r-in">  <span class="st">"2"</span>,      <span class="st">"2020-03-13"</span>, <span class="st">"CR"</span>,</span>
<span class="r-in">  <span class="st">"3"</span>,      <span class="st">"2019-11-12"</span>, <span class="st">"CR"</span>,</span>
<span class="r-in">  <span class="st">"3"</span>,      <span class="st">"2019-12-02"</span>, <span class="st">"CR"</span>,</span>
<span class="r-in">  <span class="st">"3"</span>,      <span class="st">"2020-01-01"</span>, <span class="st">"SD"</span>,</span>
<span class="r-in">  <span class="st">"4"</span>,      <span class="st">"2020-01-01"</span>, <span class="st">"PR"</span>,</span>
<span class="r-in">  <span class="st">"4"</span>,      <span class="st">"2020-03-01"</span>, <span class="st">"SD"</span>,</span>
<span class="r-in">  <span class="st">"4"</span>,      <span class="st">"2020-04-01"</span>, <span class="st">"SD"</span>,</span>
<span class="r-in">  <span class="st">"4"</span>,      <span class="st">"2020-05-01"</span>, <span class="st">"PR"</span>,</span>
<span class="r-in">  <span class="st">"4"</span>,      <span class="st">"2020-05-15"</span>, <span class="st">"NON-CR/NON-PD"</span>,</span>
<span class="r-in">  <span class="st">"5"</span>,      <span class="st">"2020-01-01"</span>, <span class="st">"PR"</span>,</span>
<span class="r-in">  <span class="st">"5"</span>,      <span class="st">"2020-01-10"</span>, <span class="st">"SD"</span>,</span>
<span class="r-in">  <span class="st">"5"</span>,      <span class="st">"2020-01-20"</span>, <span class="st">"PR"</span>,</span>
<span class="r-in">  <span class="st">"5"</span>,      <span class="st">"2020-05-15"</span>, <span class="st">"NON-CR/NON-PD"</span>,</span>
<span class="r-in">  <span class="st">"6"</span>,      <span class="st">"2020-02-06"</span>, <span class="st">"PR"</span>,</span>
<span class="r-in">  <span class="st">"6"</span>,      <span class="st">"2020-02-16"</span>, <span class="st">"CR"</span>,</span>
<span class="r-in">  <span class="st">"6"</span>,      <span class="st">"2020-03-30"</span>, <span class="st">"PR"</span>,</span>
<span class="r-in">  <span class="st">"6"</span>,      <span class="st">"2020-04-12"</span>, <span class="st">"PD"</span>,</span>
<span class="r-in">  <span class="st">"6"</span>,      <span class="st">"2020-05-01"</span>, <span class="st">"CR"</span>,</span>
<span class="r-in">  <span class="st">"6"</span>,      <span class="st">"2020-06-01"</span>, <span class="st">"CR"</span>,</span>
<span class="r-in">  <span class="st">"7"</span>,      <span class="st">"2020-02-06"</span>, <span class="st">"PR"</span>,</span>
<span class="r-in">  <span class="st">"7"</span>,      <span class="st">"2020-02-16"</span>, <span class="st">"CR"</span>,</span>
<span class="r-in">  <span class="st">"7"</span>,      <span class="st">"2020-04-01"</span>, <span class="st">"NE"</span>,</span>
<span class="r-in">  <span class="st">"9"</span>,      <span class="st">"2020-03-16"</span>, <span class="st">"CR"</span>,</span>
<span class="r-in">  <span class="st">"9"</span>,      <span class="st">"2020-04-01"</span>, <span class="st">"NE"</span>,</span>
<span class="r-in">  <span class="st">"9"</span>,      <span class="st">"2020-04-16"</span>, <span class="st">"NE"</span>,</span>
<span class="r-in">  <span class="st">"9"</span>,      <span class="st">"2020-05-01"</span>, <span class="st">"CR"</span></span>
<span class="r-in"><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>PARAMCD <span class="op">=</span> <span class="st">"OVR"</span>, ANL01FL <span class="op">=</span> <span class="st">"Y"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">pd_obs</span> <span class="op">&lt;-</span></span>
<span class="r-in">  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span>
<span class="r-in">    <span class="op">~</span><span class="va">USUBJID</span>, <span class="op">~</span><span class="va">ADTC</span>,        <span class="op">~</span><span class="va">AVALC</span>,</span>
<span class="r-in">    <span class="st">"6"</span>,      <span class="st">"2020-04-12"</span>, <span class="st">"Y"</span></span>
<span class="r-in">  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>PARAMCD <span class="op">=</span> <span class="st">"PD"</span>, ANL01FL <span class="op">=</span> <span class="st">"Y"</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">adrs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">ovr_obs</span>, <span class="va">pd_obs</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span class="r-in">    ADT <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="va">ADTC</span><span class="op">)</span>,</span>
<span class="r-in">    STUDYID <span class="op">=</span> <span class="st">"XX1234"</span></span>
<span class="r-in">  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">ADTC</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">pd_date</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/admiral/man/date_source.html" class="external-link">date_source</a></span><span class="op">(</span></span>
<span class="r-in">  dataset_name <span class="op">=</span> <span class="st">"adrs"</span>,</span>
<span class="r-in">  date <span class="op">=</span> <span class="va">ADT</span>,</span>
<span class="r-in">  filter <span class="op">=</span> <span class="va">PARAMCD</span> <span class="op">==</span> <span class="st">"PD"</span> <span class="op">&amp;</span> <span class="va">ANL01FL</span> <span class="op">==</span> <span class="st">"Y"</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Derive confirmed response parameter</span></span>
<span class="r-in"><span class="fu">derive_param_confirmed_resp</span><span class="op">(</span></span>
<span class="r-in">  <span class="va">adrs</span>,</span>
<span class="r-in">  dataset_adsl <span class="op">=</span> <span class="va">adsl</span>,</span>
<span class="r-in">  filter_source <span class="op">=</span> <span class="va">PARAMCD</span> <span class="op">==</span> <span class="st">"OVR"</span> <span class="op">&amp;</span> <span class="va">ANL01FL</span> <span class="op">==</span> <span class="st">"Y"</span>,</span>
<span class="r-in">  source_pd <span class="op">=</span> <span class="va">pd_date</span>,</span>
<span class="r-in">  source_datasets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>adrs <span class="op">=</span> <span class="va">adrs</span><span class="op">)</span>,</span>
<span class="r-in">  ref_confirm <span class="op">=</span> <span class="fl">28</span>,</span>
<span class="r-in">  set_values_to <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span></span>
<span class="r-in">    PARAMCD <span class="op">=</span> <span class="st">"CRSP"</span>,</span>
<span class="r-in">    PARAM <span class="op">=</span> <span class="st">"Confirmed Response by Investigator"</span></span>
<span class="r-in">  <span class="op">)</span></span>
<span class="r-in"><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">PARAMCD</span> <span class="op">==</span> <span class="st">"CRSP"</span><span class="op">)</span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Dataset contains CR records followed by PR.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> Run `get_crpr_dataset()` to access the CR records records followed by PR</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 9 x 8</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   USUBJID AVALC PARAMCD ANL01FL ADT        STUDYID PARAM                    AVAL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>   </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span> </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>   </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>   </span><span style="color: #949494;font-style: italic;">&lt;date&gt;</span><span>     </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>   </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>                   </span><span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span><span> 1       Y     CRSP    Y       2020-01-01 XX1234  Confirmed Response by …     1</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span><span> 2       N     CRSP    </span><span style="color: #BB0000;">NA</span><span>      </span><span style="color: #BB0000;">NA</span><span>         XX1234  Confirmed Response by …     0</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span><span> 3       N     CRSP    </span><span style="color: #BB0000;">NA</span><span>      </span><span style="color: #BB0000;">NA</span><span>         XX1234  Confirmed Response by …     0</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span><span> 4       N     CRSP    </span><span style="color: #BB0000;">NA</span><span>      </span><span style="color: #BB0000;">NA</span><span>         XX1234  Confirmed Response by …     0</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span><span> 5       N     CRSP    </span><span style="color: #BB0000;">NA</span><span>      </span><span style="color: #BB0000;">NA</span><span>         XX1234  Confirmed Response by …     0</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span><span> 6       N     CRSP    </span><span style="color: #BB0000;">NA</span><span>      </span><span style="color: #BB0000;">NA</span><span>         XX1234  Confirmed Response by …     0</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">7</span><span> 7       N     CRSP    </span><span style="color: #BB0000;">NA</span><span>      </span><span style="color: #BB0000;">NA</span><span>         XX1234  Confirmed Response by …     0</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">8</span><span> 8       N     CRSP    </span><span style="color: #BB0000;">NA</span><span>      </span><span style="color: #BB0000;">NA</span><span>         XX1234  Confirmed Response by …     0</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">9</span><span> 9       N     CRSP    </span><span style="color: #BB0000;">NA</span><span>      </span><span style="color: #BB0000;">NA</span><span>         XX1234  Confirmed Response by …     0</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Derive confirmed response parameter (accepting SD for PR and two NEs)</span></span>
<span class="r-in"><span class="fu">derive_param_confirmed_resp</span><span class="op">(</span></span>
<span class="r-in">  <span class="va">adrs</span>,</span>
<span class="r-in">  dataset_adsl <span class="op">=</span> <span class="va">adsl</span>,</span>
<span class="r-in">  filter_source <span class="op">=</span> <span class="va">PARAMCD</span> <span class="op">==</span> <span class="st">"OVR"</span> <span class="op">&amp;</span> <span class="va">ANL01FL</span> <span class="op">==</span> <span class="st">"Y"</span>,</span>
<span class="r-in">  source_pd <span class="op">=</span> <span class="va">pd_date</span>,</span>
<span class="r-in">  source_datasets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>adrs <span class="op">=</span> <span class="va">adrs</span><span class="op">)</span>,</span>
<span class="r-in">  ref_confirm <span class="op">=</span> <span class="fl">28</span>,</span>
<span class="r-in">  max_nr_ne <span class="op">=</span> <span class="fl">2</span>,</span>
<span class="r-in">  accept_sd <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span class="r-in">  set_values_to <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span></span>
<span class="r-in">    PARAMCD <span class="op">=</span> <span class="st">"CRSP"</span>,</span>
<span class="r-in">    PARAM <span class="op">=</span> <span class="st">"Confirmed Response by Investigator"</span></span>
<span class="r-in">  <span class="op">)</span></span>
<span class="r-in"><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">PARAMCD</span> <span class="op">==</span> <span class="st">"CRSP"</span><span class="op">)</span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Dataset contains CR records followed by PR.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> Run `get_crpr_dataset()` to access the CR records records followed by PR</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 9 x 8</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   USUBJID AVALC PARAMCD ANL01FL ADT        STUDYID PARAM                    AVAL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>   </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span> </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>   </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>   </span><span style="color: #949494;font-style: italic;">&lt;date&gt;</span><span>     </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>   </span><span style="color: #949494;font-style: italic;">&lt;chr&gt;</span><span>                   </span><span style="color: #949494;font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span><span> 1       Y     CRSP    Y       2020-01-01 XX1234  Confirmed Response by …     1</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span><span> 2       Y     CRSP    Y       2020-02-01 XX1234  Confirmed Response by …     1</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span><span> 3       N     CRSP    </span><span style="color: #BB0000;">NA</span><span>      </span><span style="color: #BB0000;">NA</span><span>         XX1234  Confirmed Response by …     0</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span><span> 4       N     CRSP    </span><span style="color: #BB0000;">NA</span><span>      </span><span style="color: #BB0000;">NA</span><span>         XX1234  Confirmed Response by …     0</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span><span> 5       N     CRSP    </span><span style="color: #BB0000;">NA</span><span>      </span><span style="color: #BB0000;">NA</span><span>         XX1234  Confirmed Response by …     0</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span><span> 6       N     CRSP    </span><span style="color: #BB0000;">NA</span><span>      </span><span style="color: #BB0000;">NA</span><span>         XX1234  Confirmed Response by …     0</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">7</span><span> 7       N     CRSP    </span><span style="color: #BB0000;">NA</span><span>      </span><span style="color: #BB0000;">NA</span><span>         XX1234  Confirmed Response by …     0</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">8</span><span> 8       N     CRSP    </span><span style="color: #BB0000;">NA</span><span>      </span><span style="color: #BB0000;">NA</span><span>         XX1234  Confirmed Response by …     0</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">9</span><span> 9       Y     CRSP    Y       2020-03-16 XX1234  Confirmed Response by …     1</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Stefan Bundfuss, Ross Farrugia, Amit Jain, Andrew Smith, Teckla Akinyi, Samia Kabi, Stephen Gormley, Hinal Patel, F. Hoffmann-La Roche AG, GlaxoSmithKline LLC, Amgen Inc..</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

    </footer></div>

  

  

  </body></html>

